# Acuity Мениджър с AI Асистент - Документация

## Въведение

Acuity Мениджър е мощен инструмент за управление на Acuity Scheduling резервации, интегриран с AI асистент. Системата позволява пълен контрол над резервациите, клиентите и предоставя интелигентен помощник за автоматизация на задачите.

## Защо е създаден

Този инструмент е проектиран като "анти-хакер пакет" - сигурен начин за достъп до Acuity Scheduling API без нужда от директен вход в платформата. Всички API заявки минават през защитен Cloudflare Worker backend, където API credentials са съхранени безопасно като secrets.

## Основни функции

### 1. Табло с Статистика

Централното табло предоставя бърз преглед на:
- Общ брой резервации
- Брой регистрирани клиенти
- Налични видове тренировки
- Предстоящи резервации

### 2. Управление на Резервации

Секцията "Резервации" позволява:
- Преглед на всички резервации
- Сортиране по дата
- Виждане на статус (потвърдени, чакащи, отменени)
- Детайлна информация за всяка резервация

### 3. База Данни с Клиенти

Достъп до пълна информация за всички клиенти:
- Име и фамилия
- Телефонен номер
- Имейл адрес
- История на резервации

### 4. Създаване на Нови Резервации

Удобна форма за бързо създаване на резервации:
- Избор на вид тренировка
- Избор на календар/треньор
- Дата и час
- Информация за клиента (име, телефон, имейл)

### 5. AI Асистент

Интелигентен асистент, който може да:

#### Отговаря на въпроси
- "Колко резервации имаме днес?"
- "Кои са предстоящите резервации?"
- "Покажи ми информация за клиент Иван Петров"

#### Създава резервации
- "Създай резервация за Мария Иванова на 20 януари в 14:00"
- "Запиши тренировка за Георги Димитров утре в 10 часа"

#### Търси информация
- "Кои клиенти имат резервации тази седмица?"
- "Колко свободни места има във вторник?"

## Настройка

### Стъпка 1: Конфигуриране на Acuity API

За да работи системата, трябва да имате Acuity Scheduling акаунт и API credentials:

1. Влезте в Acuity Scheduling
2. Отидете в Settings > Integrations > API
3. Генерирайте User ID и API Key

### Стъпка 2: Конфигуриране на Cloudflare Worker

Добавете Acuity credentials като Worker secrets:

```bash
# Добавяне на Acuity User ID
wrangler secret put ACUITY_USER

# Добавяне на Acuity API Key
wrangler secret put ACUITY_KEY
```

### Стъпка 3: Deploy на Worker

```bash
# Deploy на worker-backend.js
wrangler deploy
```

### Стъпка 4: Конфигуриране на AI Асистент

За да използвате AI асистента, трябва да имате API ключ от един от поддържаните providers:

#### OpenAI
1. Регистрирайте се на https://platform.openai.com/
2. Генерирайте API key от API Keys секцията
3. Въведете ключа в полето "API ключ" в Acuity Manager

#### Google AI (Gemini)
1. Отидете на https://makersuite.google.com/app/apikey
2. Създайте нов API key
3. Въведете ключа в полето "API ключ" в Acuity Manager

## Използване

### Основна навигация

Интерфейсът е разделен на две панела:

**Ляв панел:** Основни функции (табло, резервации, клиенти, нова резервация)
**Десен панел:** AI Асистент

### Работа с AI Асистент

1. **Изберете AI Provider:** OpenAI или Google AI
2. **Въведете API ключ:** Вашият personal API key
3. **Пишете на естествен език:** AI асистентът разбира български език

### Примери за команди

#### Информационни заявки
```
"Колко резервации имаме общо?"
"Покажи ми клиентите"
"Кои са предстоящите тренировки?"
"Има ли резервации за утре?"
```

#### Създаване на резервации
```
"Създай резервация за:
- Име: Иван Петров
- Телефон: +359888123456
- Имейл: ivan@example.com
- Дата: 15 януари 2024
- Час: 10:00"
```

Забележка: Когато AI асистентът предложи да създаде резервация, той ще попълни формата автоматично. Проверете данните и натиснете "Създай резервация".

## API Endpoints

Worker backend предоставя следните endpoints:

### GET /acuity
Връща списък с резервации.

**Query параметри:**
- `calendarID` (задължителен): ID на календара
- `appointmentTypeID` (опционален): ID на типа резервация

**Пример:**
```
GET /acuity?calendarID=12342518&appointmentTypeID=80052001
```

### POST /acuity
Създава нова резервация.

**Body (JSON):**
```json
{
  "appointmentTypeID": "80052001",
  "calendarID": "12342518",
  "datetime": "2024-01-15T10:00:00",
  "firstName": "Иван",
  "lastName": "Петров",
  "phone": "+359888123456",
  "email": "ivan@example.com"
}
```

### GET /acuity/clients
Връща списък с всички клиенти.

### GET /acuity/appointment-types
Връща налични видове резервации/тренировки.

### GET /acuity/calendars
Връща налични календари.

### GET /acuity/availability
Проверява наличност за резервации.

**Query параметри:**
- `appointmentTypeID` (задължителен)
- `month` (задължителен): формат YYYY-MM
- `calendarID` (опционален)

## Сигурност

### Защита на API Credentials

- API credentials се съхраняват като Worker secrets
- Никога не се изпращат на frontend
- Всички заявки минават през защитен backend
- CORS headers позволяват само разрешени заявки

### Защита на AI API Keys

- AI API keys се въвеждат от потребителя
- Съхраняват се само в браузъра (не се записват на сървър)
- Използват се директно от frontend към AI provider
- Препоръчваме използване на API keys с ограничени права

## Troubleshooting

### Проблем: Не могат да се заредят резервациите

**Решение:**
1. Проверете дали Worker е deploy-нат правилно
2. Проверете дали ACUITY_USER и ACUITY_KEY са настроени
3. Проверете browser console за грешки
4. Уверете се, че calendarID и appointmentTypeID са правилни

### Проблем: AI асистентът не работи

**Решение:**
1. Проверете дали сте въвели валиден API ключ
2. Проверете дали имате достатъчно credits в AI provider акаунта
3. Проверете browser console за грешки
4. Опитайте с различен AI provider

### Проблем: Не може да се създаде резервация

**Решение:**
1. Проверете дали всички задължителни полета са попълнени
2. Уверете се, че датата и часът са във валиден формат
3. Проверете дали избраният календар и тип резервация са активни
4. Погледнете отговора на API в browser console

## Ограничения

- Максимум 100 резервации могат да се заредят наведнъж (ограничение на Acuity API)
- AI асистентът изисква активна интернет връзка
- Acuity API има rate limits (обикновено 100 заявки/минута)

## Бъдещи подобрения

Планирани функции за следващи версии:
- Редактиране и отмяна на резервации
- Експорт на данни в различни формати
- Статистика и аналитика
- Email известия
- SMS напомняния
- Интеграция с други календари

## Поддръжка

За въпроси и проблеми, моля отворете issue в GitHub repository.

## Лиценз

Проектът е част от Into Design Studio портфолио.
